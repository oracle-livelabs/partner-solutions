<h1>Prepare environment</h1>
<h2>Introduction</h2>
<p>In this lab you will create a new user and a user group which you will use in this workshop. You will also create a compartment and set some base policies that are required.</p>
<p>Estimated Time: 15 minutes</p>
<h3>Objectives</h3>
<p>In this lab, you will:</p>
<ul>
<li>Create a new user and a new group in IDCS</li>
<li>Create a new group in OCI and map it to the group in IDCS</li>
<li>Create a new compartment</li>
<li>Set policies for the new OCI group to manage a new compartment</li>
</ul>
<h3>Prerequisites</h3>
<p>This lab assumes you have:</p>
<ul>
<li>An Oracle Cloud account with administration privileges</li>
</ul>
<h2>Task 1: Create a new user in IDCS</h2>
<ol>
<li>
<p>Step 1: Log in OCI</p>
<p>Log into <a href="https://cloud.oracle.com">cloud.oracle.com</a> and priced your Cloud Account Name.</p>
<p>Click <strong>Next</strong>.</p>
<p>![Login screen (1)](images/pre-lab_001.png =50%x*)</p>
<p>Choose <strong>oracleidentityservice</strong> as Identity Provider and click <strong>Continue</strong>.</p>
<p><img src="images/pre-lab_002.jpg" alt="Login screen (2)"></p>
<p>Enter your <strong>username</strong> and <strong>password</strong>.</p>
<p><img src="images/pre-lab_003.jpg" alt="Login screen (3)"></p>
</li>
<li>
<p>Step 2: Create a new user in IDCS</p>
<p>From the <strong>Navigator</strong> menu (top-left cornent) select <strong>Identity &amp; Security</strong> and <strong>Federation</strong>.</p>
<p><img src="images/pre-lab_004.png" alt="Image alt text"></p>
<p>In the Providers list click on <strong>OracleIdentityCloudService</strong> link.</p>
<p><img src="images/pre-lab_005.jpg" alt="Image alt text"></p>
<p><strong>OracleIdentityCloudService</strong> console page opens. Navigate to <strong>Oracle Identity Cloud Service Console</strong> by clicking on the URL.</p>
<p><img src="images/pre-lab_006.jpg" alt="Image alt text"></p>
<p>When <strong>Oracle Identity Cloud Service Console</strong> opens, click on <strong>Add a user</strong> icon to add a new user.</p>
<p><img src="images/pre-lab_007.png" alt="Image alt text"></p>
<p>Follow the <strong>Add user</strong> wizard and provided user details in the first step:</p>
<p><img src="images/pre-lab_008.jpg" alt="Image alt text"></p>
<p>We'll use user with username <em>Candy.Sweets</em> and provide a password of your choice in the second step.</p>
<p><img src="images/pre-lab_009.png" alt="Image alt text"></p>
<p>A new user is now created.</p>
</li>
<li>
<p>Step 3: Create a new user group in IDCS</p>
<p>From the Navigator menu on the right or from Groups portlet in Identity Cloud Service Console <strong>Create a new Group</strong>.</p>
<p><img src="images/pre-lab_010.png" alt="Image alt text"></p>
<p>Search for your new user and add it to the new group.</p>
<p><img src="images/pre-lab_011.png" alt="Image alt text"></p>
</li>
<li>
<p>Step 4: Create a new compartment</p>
<p>From the <strong>Navigator</strong> menu select <strong>Identity &amp; Security</strong> and <strong>Compartments</strong>.</p>
<p><img src="images/pre-lab_012.png" alt="Image alt text"></p>
<p>To create a new compartment click <strong>Create Compartment</strong>.</p>
<p><img src="images/pre-lab_013.png" alt="Image alt text"></p>
<p>Provide <strong>Name</strong>, <strong>Description</strong> and <strong>Parent Compartment</strong>, optionally add Tags, and click <strong>Create Compartment</strong>.</p>
<p><img src="images/pre-lab_014.png" alt="Image alt text"></p>
</li>
<li>
<p>Step 5: Create a new OCI Group and map it to an IDCS Group</p>
<p>In order to create policies for the Compartment you've just created, you need to create a new OCI Group. This group will map to previously created IDCS Group.</p>
<p>Use <strong>Navigator</strong> to navigate again to <strong>Identity &amp; Security</strong> and then choose <strong>Groups</strong>.</p>
<p><img src="images/pre-lab_016.png" alt="Image alt text"></p>
<p>Click <strong>Create Group</strong></p>
<p><img src="images/pre-lab_017.png" alt="Image alt text"></p>
<p>Provide <strong>Name</strong> and <strong>Description</strong> and create a new group.</p>
<p><img src="images/pre-lab_018.jpg" alt="Image alt text"></p>
<p>Navigate back to <strong>OracleIdentityCloudService</strong> details page. Click on <strong>Group Mappings</strong> and then on <strong>Add Mappings</strong> button.</p>
<p><img src="images/pre-lab_019.png" alt="Image alt text"></p>
<p>This will open <strong>Add Mappings</strong> popup window. Select your new group from <strong>Identity Provider Group</strong> list and your newly created OCI group from the <strong>OCI Group</strong> list.</p>
<p><img src="images/pre-lab_020.jpg" alt="Image alt text"></p>
</li>
<li>
<p>Step 6: Create a new Policy which grants manage privileges in a new Compartment to the new OCI Group</p>
<p>Once again use <strong>Navigator</strong> to navigate to <strong>Identity &amp; Security</strong> and choose <strong>Policies</strong>.</p>
<p><img src="images/pre-lab_021.png" alt="Image alt text"></p>
<p>In the Console click <strong>Create Policy</strong>.</p>
<p><img src="images/pre-lab_022.png" alt="Image alt text"></p>
<p>Provide a new Policy <strong>Name</strong> and <strong>Description</strong>.</p>
<p>Select <em>root</em> compartment of your tenancy.</p>
<p>In <strong>Policy Builder</strong> section, search for <strong>Let compartment admins manage the compartment</strong> in the <strong>Common policy templates</strong> pulldown list.</p>
<p>Make sure <strong>Groups</strong> is selected and then choise your newly created OCI Group from the list of available OCI Groups. And choose <strong>your root</strong> compartment for <strong>Location</strong>.</p>
<p><img src="images/pre-lab_023.png" alt="Image alt text"></p>
<p>Your policy should look like this:</p>
<pre><code>Allow group OCI_Chocolate-Group to manage all-resources in tenancy &lt;your root comparment&gt;
</code></pre>
<p>Click <strong>Create</strong> to create a new policy in your <em>root</em> compartment.</p>
<p><img src="images/pre-lab_024.jpg" alt="Image alt text"></p>
</li>
</ol>
<h2>Task 2: Logout</h2>
<p>When you are finished with Task 1, simply logout from <a href="https://cloud.oracle.com">cloud.oracle.com</a> as you will continue with your newly created user.</p>
<h2>Learn More</h2>
<ul>
<li><a href="https://docs.oracle.com/en-us/iaas/Content/home.htm">OCI Documentation</a></li>
</ul>
<h2>Acknowledgements</h2>
<ul>
<li><strong>Author</strong> - Žiga Vaupot <img src="images/SpadeACEPro.png" alt="Oracle ACE Pro">, Qubix Intl.</li>
<li><strong>Contributors</strong> -  Grega Dvoršak, Qubix Intl.</li>
<li><strong>Last Updated By/Date</strong> - Žiga Vaupot, November 2022</li>
</ul>
